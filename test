#!/bin/bash
## Tests for bcalc

## Common variables used for the tests.
exe="./bcalc"

## Basic math operations.
# Parenthesis
basic_paren() {
    # Local to keep them in the function.
    local expected="8"
    local command="$exe '(2+2)*2'"
    local result="$(eval "${command}")"
    
    if [ "${result}" == "${expected}" ]; then
        basic_paren_test="GOOD -- The basic parenthesis test has passed."
    else
        basic_paren_test="BAD -- The result of the basic parenthesis test is \"${result}\", when it should be \"${expected}\"."
    fi
}

# Exponents
basic_expon() {
    local expected="16"
    local command="$exe 4^2"
    local result="$(eval "${command}")"
    
    if [ "${result}" == "${expected}" ]; then
        basic_expon_test="GOOD -- The basic exponent test has passed."
    else
        basic_expon_test="BAD -- The result of the basic exponent test is \"${result}\", when it should be \"${expected}\"."
    fi
}

# Multiplication
basic_multi() {
    local expected="32"
    local command="$exe 16*2"
    local result="$(eval "${command}")"
    
    if [ "${result}" == "${expected}" ]; then
        basic_multi_test="GOOD -- The basic multiplication test has passed."
    else
        basic_multi_test="BAD -- The result of the basic multiplication test is \"${result}\", when it should be \"${expected}\"."
    fi
}

basic_paren && echo "${basic_paren_test}"
basic_expon && echo "${basic_expon_test}"
basic_multi && echo "${basic_multi_test}"
